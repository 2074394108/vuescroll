/*
    * @name: vuescroll 3.7.12
    * @author: (c) 2018-2018 wangyi7099
    * @description: A virtual scrollbar based on vue.js 2.x
    * @license: MIT
    * @GitHub: https://github.com/wangyi7099/vuescroll
    */
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var Vue=_interopDefault(require("vue")),map={vertical:{bar:{size:"height",opsSize:"width",posName:"top",page:"pageY",scroll:"scrollTop",scrollSize:"scrollHeight",offset:"offsetHeight",client:"clientY"},axis:"Y"},horizontal:{bar:{size:"width",opsSize:"height",posName:"left",page:"pageX",scroll:"scrollLeft",scrollSize:"scrollWidth",offset:"offsetWidth",client:"clientX"},axis:"X"}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function deepCopy(e,t){for(var o in t="object"===(void 0===t?"undefined":_typeof(t))&&t||{},e)t[o]="object"===_typeof(e[o])?deepCopy(e[o],t[o]={}):e[o];return t}function deepMerge(e,t){for(var o in t=t||{},e)"object"===_typeof(e[o])?void 0===t[o]?(t[o]={},deepCopy(e[o],t[o])):deepMerge(e[o],t[o]):void 0===t[o]&&(t[o]=e[o]);return t}function defineReactive(e,t,o,i){var s=null;(o[t]||"function"==typeof o)&&(i=i||t,"function"==typeof o&&(s=o),Object.defineProperty(e,t,{get:s||function(){return o[i]},configurable:!0}))}var scrollBarWidth=void 0;function getGutter(){if(Vue.prototype.$isServer)return 0;if(void 0!==scrollBarWidth)return scrollBarWidth;var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",e.appendChild(o);var i=o.offsetWidth;return e.parentNode.removeChild(e),scrollBarWidth=t-i,getGutter.isUsed=!1,scrollBarWidth}var haveHideen=!1;function hideSystemBar(){if(!haveHideen){haveHideen=!0;var e=document.createElement("style");e.type="text/css",e.innerHTML=".vuescroll-panel::-webkit-scrollbar{width:0;height:0}",document.getElementsByTagName("HEAD").item(0).appendChild(e)}}function renderTransform(e,t){return{transform:"translate"+map[e].axis+"("+t+"%)",msTransform:"translate"+map[e].axis+"("+t+"%)",webkitTransform:"translate"+map[e].axis+"("+t+"%)"}}function on(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,o,i)}function off(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener(t,o,i)}function easingPattern(e,t){var o=null;return"easeInQuad"===e&&(o=t*t),"easeOutQuad"===e&&(o=t*(2-t)),"easeInOutQuad"===e&&(o=t<.5?2*t*t:(4-2*t)*t-1),"easeInCubic"===e&&(o=t*t*t),"easeOutCubic"===e&&(o=--t*t*t+1),"easeInOutCubic"===e&&(o=t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),"easeInQuart"===e&&(o=t*t*t*t),"easeOutQuart"===e&&(o=1- --t*t*t*t),"easeInOutQuart"===e&&(o=t<.5?8*t*t*t*t:1-8*--t*t*t*t),"easeInQuint"===e&&(o=t*t*t*t*t),"easeOutQuint"===e&&(o=1+--t*t*t*t*t),"easeInOutQuint"===e&&(o=t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t),o||t}function goScrolling(e,t,o,i,s){var l=null,r=null,n=null,a=e.scrollTop,c=e.scrollLeft;a+o<0&&(o=-a),a+o>e.scrollHeight&&(o=e.scrollHeight-a),c+t<0&&(t=-c),c+t>e.scrollWidth&&(t=e.scrollWidth-c);requestAnimationFrame(function h(_){l||(l=_);var u=_-l,p=u/i>1?1:u/i;r=c+t*easingPattern(s,p),n=a+o*easingPattern(s,p),(Math.abs(n-a)<=Math.abs(o)||Math.abs(r-c)<=Math.abs(t))&&(e.scrollTop=Math.floor(n),e.scrollLeft=Math.floor(r),p<1&&requestAnimationFrame(h))})}function listenResize(e,t){window.getComputedStyle(e);var o=document.createElement("object");return o.style.cssText="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",o.tabIndex=-1,o.type="text/html",o.onload=function(){t.forEach(function(e){on(o.contentDocument.defaultView,"resize",e)})},e.appendChild(o),function(){o.contentDocument&&t.forEach(function(e){off(o.contentDocument.defaultView,"resize",e)}),e.removeChild(o)}}var GCF={vuescroll:{mode:"native"},scrollPanel:{initialScrollY:!1,initialScrollX:!1,speed:300,easing:void 0},scrollContent:{tag:"div",padding:!0,props:{},attrs:{}},vRail:{width:"5px",pos:"right",background:"#a5d6a7",opacity:0},hRail:{height:"5px",pos:"bottom",background:"#a5d6a7",opacity:0},vBar:{width:"5px",pos:"right",background:"#4caf50",deltaY:100,keepShow:!1,opacity:1,hover:!1},hBar:{height:"5px",pos:"bottom",background:"#4caf50",keepShow:!1,opacity:1,hover:!1}};function hackPropsData(){var e=this;if("vueScroll"===e.$options.name){var t=deepMerge(GCF,{});e.$options.propsData.ops=e.$options.propsData.ops||{},Object.keys(e.$options.propsData.ops).forEach(function(t){defineReactive(e.mergedOptions,t,e.$options.propsData.ops)}),deepMerge(t,e.mergedOptions),defineReactive(e.mergedOptions.vBar,"pos",e.mergedOptions.vRail),defineReactive(e.mergedOptions.vBar,"width",e.mergedOptions.vRail),defineReactive(e.mergedOptions.hBar,"pos",e.mergedOptions.hRail),defineReactive(e.mergedOptions.hBar,"height",e.mergedOptions.hRail);defineReactive(e.mergedOptions.scrollContent,"paddPos",function(){return"padding-"+e.mergedOptions.vRail.pos}),defineReactive(e.mergedOptions.scrollContent,"paddValue",function(){return e.mergedOptions.vRail.width})}}var LifeCycleMix={created:function(){hackPropsData.call(this)}};function extractScrollDistance(e,t,o){var i=void 0;return(i=/(\d+)%$/.exec(e))?(i=i[1],i=o[t]*i/100):i=e,i}var vuescrollApi={methods:{scrollTo:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];void 0===e.x?e.x=this.$refs.scrollPanel.$el.scrollLeft:e.x=extractScrollDistance(e.x,"scrollWidth",this.scrollPanelElm),void 0===e.y?e.y=this.$refs.scrollPanel.$el.scrollTop:e.y=extractScrollDistance(e.y,"scrollHeight",this.scrollPanelElm);var o=e.x,i=e.y;"native"==this.mode?t?goScrolling(this.$refs.scrollPanel.$el,o-this.$refs.scrollPanel.$el.scrollLeft,i-this.$refs.scrollPanel.$el.scrollTop,this.mergedOptions.scrollPanel.speed,this.mergedOptions.scrollPanel.easing):this.$refs.scrollPanel.$el.scrollTo(o,i):this.scroller.scrollTo(e.x,e.y,t)},forceUpdate:function(){var e=this;this.$forceUpdate(),Object.keys(this.$refs).forEach(function(t){var o=e.$refs[t];o._isVue&&o.$forceUpdate()})}}},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e};function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var bar={name:"bar",computed:{bar:function(){return map[this.type].bar},parent:function(){return this.$parent.$refs}},render:function(e){var t,o=this,i={style:_extends((_defineProperty(t={},this.bar.posName,0),_defineProperty(t,this.ops.pos,0),_defineProperty(t,this.bar.size,this.state.size),_defineProperty(t,this.bar.opsSize,this.ops[this.bar.opsSize]),_defineProperty(t,"background",this.ops.background),_defineProperty(t,"opacity",this.state.opacity),_defineProperty(t,"cursor","pointer"),_defineProperty(t,"position","absolute"),_defineProperty(t,"borderRadius","4px"),_defineProperty(t,"transition","opacity .5s"),_defineProperty(t,"cursor","pointer"),_defineProperty(t,"userSelect","none"),t),renderTransform(this.type,this.state.posValue)),class:"vuescroll-"+this.type+"-scrollbar",on:{mousedown:this.handleMousedown}};return this.ops.hover&&(i.on.mouseenter=function(){o.$el.style.background=o.ops.hover},i.on.mouseleave=function(){o.$el.style.background=o.ops.background}),e("div",i)},methods:{handleMousedown:function(e){e.stopPropagation(),this.axisStartPos=e[this.bar.client]-this.$el.getBoundingClientRect()[this.bar.posName],this.$emit("setMousedown",!0),on(document,"mousemove",this.handleMouseMove),on(document,"mouseup",this.handleMouseUp)},handleMouseMove:function(e){if(this.axisStartPos){var t=(e[this.bar.client]-this.parent[this.type+"Rail"].getBoundingClientRect()[this.bar.posName]-this.axisStartPos)/this.parent[this.type+"Rail"][this.bar.offset];this.parent.scrollPanel.$el[this.bar.scroll]=this.parent.scrollPanel.$el[this.bar.scrollSize]*t}},handleMouseUp:function(){this.$emit("setMousedown",!1),this.$parent.hideBar(),this.axisStartPos=0,off(document,"mousemove",this.handleMouseMove),off(document,"mouseup",this.handleMouseUp)}},props:{ops:{type:Object,required:!0},state:{type:Object,required:!0},type:{type:String,required:!0}}};function _defineProperty$1(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function handleClickTrack(e,t,o,i,s){var l=t.page,r=o[i+"Bar"].$el[t.offset],n=(e[l]-e.target.getBoundingClientRect()[t.posName]-r/2)/e.target[t.offset],a=o.scrollPanel.$el[t.scrollSize]*n;s.scrollTo(_defineProperty$1({},map[i].axis.toLowerCase(),a))}var rail={name:"rail",functional:!0,render:function(e,t){var o,i=t.parent,s=t.props,l=map[s.type].bar,r=i.$refs;return e("div",{style:(_defineProperty$1(o={},l.posName,0),_defineProperty$1(o,s.ops.pos,0),_defineProperty$1(o,l.size,"100%"),_defineProperty$1(o,l.opsSize,s.ops[l.opsSize]),_defineProperty$1(o,"background",s.ops.background),_defineProperty$1(o,"opacity",s.ops.opacity),_defineProperty$1(o,"position","absolute"),_defineProperty$1(o,"cursor","pointer"),_defineProperty$1(o,"borderRadius","4px"),o),class:"vuescroll-"+s.type+"-rail",ref:s.type+"Rail",on:{click:function(e){handleClickTrack(e,l,r,s.type,i)}}})}},scrollContent={name:"scrollContent",functional:!0,render:function(e,t){var o=t.props,i=t.slots,s=deepMerge(o.state.style,{});return s.position="relative",s.minHeight="100%",o.ops.padding&&(s[o.ops.paddPos]=o.ops.paddValue),e(o.ops.tag,{style:s,ref:"scrollContent",class:"vuescroll-content",props:o.ops.props,attrs:o.ops.attrs},i().default)},props:{ops:{default:function(){return{}}},state:{default:function(){return{}}}}},scrollPanel={name:"scrollPanel",methods:{updateInitialScroll:function(){var e=0,t=0;this.ops.initialScrollX&&(e=this.ops.initialScrollX),this.ops.initialScrollY&&(t=this.ops.initialScrollY),this.$parent.scrollTo({x:e,y:t})}},mounted:function(){var e=this;this.$nextTick(function(){e._isDestroyed||e.updateInitialScroll()})},render:function(e){return e("div",{class:["vuescroll-panel"]},[[this.$slots.default]])},props:{ops:{default:function(){return{}},validator:function(e){var t=!0,o=(e=e||{}).initialScrollY,i=e.initialScrollX;return o&&!String(o).match(/^\d+(\.\d+)?(%)?$/)&&(console.error("[vuescroll]: The prop `initialScrollY` should be a percent number like 10% or an exact number that greater than or equal to 0 like 100."),t=!1),i&&!String(i).match(/^\d+(\.\d+)?(%)?$/)&&(console.error("[vuescroll]: The prop `initialScrollX` should be a percent number like 10% or an exact number that greater than or equal to 0 like 100."),t=!1),t}},state:{}}},time=Date.now||function(){return+new Date},desiredFrames=60,millisecondsPerSecond=1e3,running={},counter=1,core={effect:{}},global=window;core.effect.Animate={requestAnimationFrame:function(){var e=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||global.oRequestAnimationFrame,t=!!e;if(e&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(e.toString())&&(t=!1),t)return function(t,o){e(t,o)};var o={},i=1,s=null,l=+new Date;return function(e,t){var r=i++;return o[r]=e,null===s&&(s=setInterval(function(){var e=+new Date,t=o;for(var i in o={},t)t.hasOwnProperty(i)&&(t[i](e),l=e);e-l>2500&&(clearInterval(s),s=null)},1e3/60)),r}}(),stop:function(e){var t=null!=running[e];return t&&(running[e]=null),t},isRunning:function(e){return null!=running[e]},start:function(e,t,o,i,s,l){var r=time(),n=r,a=0,c=0,h=counter++;if(l||(l=document.body),h%20==0){var _={};for(var u in running)_[u]=!0;running=_}return running[h]=!0,core.effect.Animate.requestAnimationFrame(function _(u){var p=!0!==u,d=time();if(!running[h]||t&&!t(h))return running[h]=null,void(o&&o(desiredFrames-c/((d-r)/millisecondsPerSecond),h,!1));if(p)for(var f=Math.round((d-n)/(millisecondsPerSecond/desiredFrames))-1,m=0;m<Math.min(f,4);m++)_(!0),c++;i&&(a=(d-r)/i)>1&&(a=1);var v=s?s(a):a;!1!==e(v,d,p)&&1!==a||!p?p&&(n=d,core.effect.Animate.requestAnimationFrame(_,l)):(running[h]=null,o&&o(desiredFrames-c/((d-r)/millisecondsPerSecond),h,1===a||null==i))},l),h}};var NOOP=function(){},easeOutCubic=function(e){return Math.pow(e-1,3)+1},easeInOutCubic=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};function Scroller(e,t){for(var o in this.__callback=e,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:NOOP,onScroll:NOOP,penetrationDeceleration:.03,penetrationAcceleration:.08},t)this.options[o]=t[o]}var members={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(e,t,o,i){e===+e&&(this.__clientWidth=e),t===+t&&(this.__clientHeight=t),o===+o&&(this.__contentWidth=o),i===+i&&(this.__contentHeight=i),this.__computeScrollMax(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition:function(e,t){this.__clientLeft=e||0,this.__clientTop=t||0},setSnapSize:function(e,t){this.__snapWidth=e,this.__snapHeight=t},activatePullToRefresh:function(e,t,o,i){this.__refreshHeight=e,this.__refreshActivate=t,this.__refreshDeactivate=o,this.__refreshStart=i},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(e,t,o,i,s){if(!this.options.zooming)throw new Error("Zooming is not enabled!");s&&(this.__zoomComplete=s),this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1);var l=this.__zoomLevel;null==o&&(o=this.__clientWidth/2),null==i&&(i=this.__clientHeight/2),e=Math.max(Math.min(e,this.options.maxZoom),this.options.minZoom),this.__computeScrollMax(e);var r=(o+this.__scrollLeft)*e/l-o,n=(i+this.__scrollTop)*e/l-i;r>this.__maxScrollLeft?r=this.__maxScrollLeft:r<0&&(r=0),n>this.__maxScrollTop?n=this.__maxScrollTop:n<0&&(n=0),this.__publish(r,n,e,t)},zoomBy:function(e,t,o,i,s){this.zoomTo(this.__zoomLevel*e,t,o,i,s)},scrollTo:function(e,t,o,i){if(this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1),null!=i&&i!==this.__zoomLevel){if(!this.options.zooming)throw new Error("Zooming is not enabled!");e*=i,t*=i,this.__computeScrollMax(i)}else i=this.__zoomLevel;this.options.scrollingX?this.options.paging?e=Math.round(e/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(e=Math.round(e/this.__snapWidth)*this.__snapWidth):e=this.__scrollLeft,this.options.scrollingY?this.options.paging?t=Math.round(t/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(t=Math.round(t/this.__snapHeight)*this.__snapHeight):t=this.__scrollTop,e=Math.max(Math.min(this.__maxScrollLeft,e),0),t=Math.max(Math.min(this.__maxScrollTop,t),0),console.log(e,t,this),e===this.__scrollLeft&&t===this.__scrollTop&&(o=!1),this.__isTracking||this.__publish(e,t,i,o)},scrollBy:function(e,t,o){var i=this.__isAnimating?this.__scheduledLeft:this.__scrollLeft,s=this.__isAnimating?this.__scheduledTop:this.__scrollTop;this.scrollTo(i+(e||0),s+(t||0),o)},doMouseZoom:function(e,t,o,i){var s=e>0?.97:1.03;return this.zoomTo(this.__zoomLevel*s,!1,o-this.__clientLeft,i-this.__clientTop)},doTouchStart:function(e,t){if(null==e.length)throw new Error("Invalid touch list: "+e);if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);var o,i;this.__interruptedAnimation=!0,this.__isDecelerating&&(core.effect.Animate.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0),this.__isAnimating&&(core.effect.Animate.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var s=1===e.length;s?(o=e[0].pageX,i=e[0].pageY):(o=Math.abs(e[0].pageX+e[1].pageX)/2,i=Math.abs(e[0].pageY+e[1].pageY)/2),this.__initialTouchLeft=o,this.__initialTouchTop=i,this.__zoomLevelStart=this.__zoomLevel,this.__lastTouchLeft=o,this.__lastTouchTop=i,this.__lastTouchMove=t,this.__lastScale=1,this.__enableScrollX=!s&&this.options.scrollingX,this.__enableScrollY=!s&&this.options.scrollingY,this.__isTracking=!0,this.__didDecelerationComplete=!1,this.__isDragging=!s,this.__isSingleTouch=s,this.__positions=[]},doTouchMove:function(e,t,o){if(null==e.length)throw new Error("Invalid touch list: "+e);if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);if(this.__isTracking){var i,s;2===e.length?(i=Math.abs(e[0].pageX+e[1].pageX)/2,s=Math.abs(e[0].pageY+e[1].pageY)/2):(i=e[0].pageX,s=e[0].pageY);var l=this.__positions;if(this.__isDragging){var r=i-this.__lastTouchLeft,n=s-this.__lastTouchTop,a=this.__scrollLeft,c=this.__scrollTop,h=this.__zoomLevel;if(null!=o&&this.options.zooming){var _=h;if(h=h/this.__lastScale*o,_!==(h=Math.max(Math.min(h,this.options.maxZoom),this.options.minZoom))){var u=i-this.__clientLeft,p=s-this.__clientTop;a=(u+a)*h/_-u,c=(p+c)*h/_-p,this.__computeScrollMax(h)}}if(this.__enableScrollX){a-=r*this.options.speedMultiplier;var d=this.__maxScrollLeft;(a>d||a<0)&&(this.options.bouncing?a+=r/2*this.options.speedMultiplier:a=a>d?d:0)}if(this.__enableScrollY){c-=n*this.options.speedMultiplier;var f=this.__maxScrollTop;(c>f||c<0)&&(this.options.bouncing?(c+=n/2*this.options.speedMultiplier,this.__enableScrollX||null==this.__refreshHeight||(!this.__refreshActive&&c<=-this.__refreshHeight?(this.__refreshActive=!0,this.__refreshActivate&&this.__refreshActivate()):this.__refreshActive&&c>-this.__refreshHeight&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))):c=c>f?f:0)}l.length>60&&l.splice(0,30),l.push(a,c,t),this.__publish(a,c,h)}else{var m=this.options.locking?3:0,v=Math.abs(i-this.__initialTouchLeft),g=Math.abs(s-this.__initialTouchTop);this.__enableScrollX=this.options.scrollingX&&v>=m,this.__enableScrollY=this.options.scrollingY&&g>=m,l.push(this.__scrollLeft,this.__scrollTop,t),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(v>=5||g>=5),this.__isDragging&&(this.__interruptedAnimation=!1)}this.__lastTouchLeft=i,this.__lastTouchTop=s,this.__lastTouchMove=t,this.__lastScale=o}},doTouchEnd:function(e){if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error("Invalid timestamp value: "+e);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging)if(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&e-this.__lastTouchMove<=100){for(var t=this.__positions,o=t.length-1,i=o,s=o;s>0&&t[s]>this.__lastTouchMove-100;s-=3)i=s;if(i!==o){var l=t[o]-t[i],r=this.__scrollLeft-t[i-2],n=this.__scrollTop-t[i-1];this.__decelerationVelocityX=r/l*(1e3/60),this.__decelerationVelocityY=n/l*(1e3/60);var a=this.options.paging||this.options.snapping?4:1;Math.abs(this.__decelerationVelocityX)>a||Math.abs(this.__decelerationVelocityY)>a?this.__refreshActive||this.__startDeceleration(e):this.options.scrollingComplete()}else this.options.scrollingComplete()}else e-this.__lastTouchMove>100&&this.options.scrollingComplete();this.__isDecelerating||(this.__refreshActive&&this.__refreshStart?(this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()):((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel),this.__refreshActive&&(this.__refreshActive=!1,this.__refreshDeactivate&&this.__refreshDeactivate()))),this.__positions.length=0}},__publish:function(e,t,o,i){var s=this,l=s.__isAnimating;if(l&&(core.effect.Animate.stop(l),s.__isAnimating=!1),i&&s.options.animating){s.__scheduledLeft=e,s.__scheduledTop=t,s.__scheduledZoom=o;var r=s.__scrollLeft,n=s.__scrollTop,a=s.__zoomLevel,c=e-r,h=t-n,_=o-a;s.__isAnimating=core.effect.Animate.start(function(e,t,o){o&&(s.__scrollLeft=r+c*e,s.__scrollTop=n+h*e,s.__zoomLevel=a+_*e,s.__callback&&(s.__callback(s.__scrollLeft,s.__scrollTop,s.__zoomLevel),s.options.onScroll()))},function(e){return s.__isAnimating===e},function(e,t,o){t===s.__isAnimating&&(s.__isAnimating=!1),(s.__didDecelerationComplete||o)&&s.options.scrollingComplete(),s.options.zooming&&(s.__computeScrollMax(),s.__zoomComplete&&(s.__zoomComplete(),s.__zoomComplete=null))},s.options.animationDuration,l?easeOutCubic:easeInOutCubic)}else s.__scheduledLeft=s.__scrollLeft=e,s.__scheduledTop=s.__scrollTop=t,s.__scheduledZoom=s.__zoomLevel=o,s.__callback&&(s.__callback(e,t,o),s.options.onScroll()),s.options.zooming&&(s.__computeScrollMax(),s.__zoomComplete&&(s.__zoomComplete(),s.__zoomComplete=null))},__computeScrollMax:function(e){null==e&&(e=this.__zoomLevel),this.__maxScrollLeft=Math.max(this.__contentWidth*e-this.__clientWidth,0),this.__maxScrollTop=Math.max(this.__contentHeight*e-this.__clientHeight,0)},__startDeceleration:function(e){var t=this;if(t.options.paging){var o=Math.max(Math.min(t.__scrollLeft,t.__maxScrollLeft),0),i=Math.max(Math.min(t.__scrollTop,t.__maxScrollTop),0),s=t.__clientWidth,l=t.__clientHeight;t.__minDecelerationScrollLeft=Math.floor(o/s)*s,t.__minDecelerationScrollTop=Math.floor(i/l)*l,t.__maxDecelerationScrollLeft=Math.ceil(o/s)*s,t.__maxDecelerationScrollTop=Math.ceil(i/l)*l}else t.__minDecelerationScrollLeft=0,t.__minDecelerationScrollTop=0,t.__maxDecelerationScrollLeft=t.__maxScrollLeft,t.__maxDecelerationScrollTop=t.__maxScrollTop;var r=t.options.snapping?4:.001;t.__isDecelerating=core.effect.Animate.start(function(e,o,i){t.__stepThroughDeceleration(i)},function(){var e=Math.abs(t.__decelerationVelocityX)>=r||Math.abs(t.__decelerationVelocityY)>=r;return e||(t.__didDecelerationComplete=!0),e},function(e,o,i){t.__isDecelerating=!1,t.__didDecelerationComplete&&t.options.scrollingComplete(),t.scrollTo(t.__scrollLeft,t.__scrollTop,t.options.snapping)})},__stepThroughDeceleration:function(e){var t=this.__scrollLeft+this.__decelerationVelocityX,o=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var i=Math.max(Math.min(this.__maxDecelerationScrollLeft,t),this.__minDecelerationScrollLeft);i!==t&&(t=i,this.__decelerationVelocityX=0);var s=Math.max(Math.min(this.__maxDecelerationScrollTop,o),this.__minDecelerationScrollTop);s!==o&&(o=s,this.__decelerationVelocityY=0)}if(e?this.__publish(t,o,this.__zoomLevel):(this.__scrollLeft=t,this.__scrollTop=o),!this.options.paging){this.__decelerationVelocityX*=.95,this.__decelerationVelocityY*=.95}if(this.options.bouncing){var l=0,r=0,n=this.options.penetrationDeceleration,a=this.options.penetrationAcceleration;t<this.__minDecelerationScrollLeft?l=this.__minDecelerationScrollLeft-t:t>this.__maxDecelerationScrollLeft&&(l=this.__maxDecelerationScrollLeft-t),o<this.__minDecelerationScrollTop?r=this.__minDecelerationScrollTop-o:o>this.__maxDecelerationScrollTop&&(r=this.__maxDecelerationScrollTop-o),0!==l&&(l*this.__decelerationVelocityX<=0?this.__decelerationVelocityX+=l*n:this.__decelerationVelocityX=l*a),0!==r&&(r*this.__decelerationVelocityY<=0?this.__decelerationVelocityY+=r*n:this.__decelerationVelocityY=r*a),Math.abs(this.__decelerationVelocityY)<.001&&console.log(this.__decelerationVelocityY)}}};for(var key in members)Scroller.prototype[key]=members[key];function render(e,t){var o,i=document.documentElement.style;t.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?o="presto":"MozAppearance"in i?o="gecko":"WebkitAppearance"in i?o="webkit":"string"==typeof navigator.cpuClass&&(o="trident");var s={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[o],l=document.createElement("div"),r=s+"Perspective",n=s+"Transform";return void 0!==l.style[r]?function(t,o,i){e.style[n]="translate3d("+-t+"px,"+-o+"px,0) scale("+i+")"}:void 0!==l.style[n]?function(t,o,i){e.style[n]="translate("+-t+"px,"+-o+"px) scale("+i+")"}:function(t,o,i){e.style.marginLeft=t?-t/i+"px":"",e.style.marginTop=o?-o/i+"px":"",e.style.zoom=i||""}}function listenContainer(e,t,o){var i=null;if("ontouchstart"in window){var s=function(e){e.touches[0]&&e.touches[0].target&&e.touches[0].target.tagName.match(/input|textarea|select/i)||(o("mousedown"),t.doTouchStart(e.touches,e.timeStamp),e.preventDefault())},l=function(e){o("mousemove"),t.doTouchMove(e.touches,e.timeStamp,e.scale)},r=function(e){o("mouseup"),t.doTouchEnd(e.timeStamp)},n=function(e){t.doTouchEnd(e.timeStamp)};e.addEventListener("touchstart",s,!1),document.addEventListener("touchmove",l,!1),document.addEventListener("touchend",r,!1),document.addEventListener("touchcancel",n,!1),i=function(){e.removeEventListener("touchstart",s,!1),document.removeEventListener("touchmove",l,!1),document.removeEventListener("touchend",r,!1),document.removeEventListener("touchcancel",n,!1)}}else{var a=function(e){e.target.tagName.match(/input|textarea|select/i)||(o("mousedown"),t.doTouchStart([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),_=!0)},c=function(e){_&&(o("mousemove"),t.doTouchMove([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),_=!0)},h=function(e){_&&(o("mouseup"),t.doTouchEnd(e.timeStamp),_=!1)},_=!1;e.addEventListener("mousedown",a,!1),document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",h,!1),i=function(){e.removeEventListener("mousedown",a,!1),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",h,!1)}}return t.options.onScroll=function(){o("onscroll")},i}function createPanel(e,t){var o={ref:"scrollPanel",style:{},nativeOn:{scroll:t.handleScroll},props:{ops:t.mergedOptions.scrollPanel,state:t.scrollPanel.state}};if("native"==t.mode){o.style.overflowY=t.vBar.state.size?"scroll":"inherit",o.style.overflowX=t.hBar.state.size?"scroll":"inherit";getGutter();getGutter.isUsed||(getGutter.isUsed=!0),hideSystemBar(),o.style.height="100%"}else o.style.userSelect="none";return e("scrollPanel",o,["native"==t.mode?createContent(e,t):[t.$slots.default]])}function createContent(e,t){return e("scrollContent",{props:{ops:t.mergedOptions.scrollContent}},[[t.$slots.default]])}function createRail(e,t,o){var i="vertical"===o?"vRail":"hRail",s="vertical"===o?"vBar":"hBar",l={props:{type:o,ops:t.mergedOptions[i],state:t[i].state}};return t[s].state.size?e("rail",l):null}function createBar(e,t,o){var i="vertical"===o?"vBar":"hBar",s={props:{type:o,ops:t.mergedOptions[i],state:t[i].state},on:{setMousedown:t.setMousedown},ref:o+"Bar"};return t[i].state.size?e("bar",s):null}var vuescroll={name:"vueScroll",mixins:[LifeCycleMix,vuescrollApi],data:function(){return{vuescroll:{state:{isDragging:!1,listeners:[],mousedown:!1,pointerLeave:!0,timeoutId:0,updateType:"",internalScrollTop:0,internalScrollLeft:0}},scrollPanel:{el:"",state:{left:0,top:0,zoom:1}},scrollContent:{},vRail:{state:{}},hRail:{state:{}},vBar:{state:{posValue:0,size:0,opacity:0}},hBar:{state:{posValue:0,size:0,opacity:0}},mergedOptions:{vuescroll:{},scrollPanel:{},scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}},render:function(e){var t=this,o={style:{position:"relative",height:"100%",width:"100%",padding:0},class:"vue-scroll",on:{mouseenter:function(){t.vuescroll.state.pointerLeave=!1,t.showBar(),t.update()},mouseleave:function(){t.vuescroll.state.pointerLeave=!0,t.hideBar()},mousemove:function(){t.vuescroll.state.pointerLeave=!1,t.showBar(),t.update()}}};return"native"==this.mode?(o.style.overflowY=t.vBar.state.size?"hidden":"inherit",o.style.overflowX=t.hBar.state.size?"hidden":"inherit"):o.style.overflow="hidden",e("div",o,[createPanel(e,t),createRail(e,t,"vertical"),createBar(e,t,"vertical"),createRail(e,t,"horizontal"),createBar(e,t,"horizontal")])},computed:{scrollPanelElm:function(){return this.$refs.scrollPanel.$el},mode:function(){return this.mergedOptions.vuescroll.mode}},methods:{updateScroller:function(){var e=this.$el.clientWidth,t=this.$el.clientHeight,o=this.scrollPanelElm.scrollWidth,i=this.scrollPanelElm.scrollHeight;this.scroller.setDimensions(e,t,o,i)},handleScroll:function(e){this.update("handle-scroll",e),this.showAndDefferedHideBar()},showAndDefferedHideBar:function(){var e=this;this.showBar(),this.vuescroll.state.timeoutId&&clearTimeout(this.vuescroll.state.timeoutId),this.vuescroll.state.timeoutId=setTimeout(function(){e.vuescroll.state.timeoutId=0,e.hideBar()},500)},emitEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.scrollPanelElm,i={type:"vertical"},s={type:"horizontal"};i.process=o.scrollTop/(o.scrollHeight-o.clientHeight),s.process=o.scrollLeft/(o.scrollWidth-o.clientWidth),i.barSize=this.vBar.state.size,s.barSize=this.hBar.state.size,this.$emit(e,i,s,t)},update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=void 0,i=void 0,s=this.scrollPanelElm,l=this.$el;if(s){if("native"==this.mode)o=100*s.clientHeight/s.scrollHeight,i=100*s.clientWidth/s.scrollWidth,this.vBar.state.posValue=100*s.scrollTop/s.clientHeight,this.hBar.state.posValue=100*s.scrollLeft/s.clientWidth;else{!1!==t&&this.updateScroller();var r=this.scroller,n=0,a=0,c=l.clientWidth,h=l.clientHeight,_=this.scrollPanelElm.scrollWidth,u=this.scrollPanelElm.scrollHeight,p=h<u;c<_&&(r.__scrollLeft<0?n=-r.__scrollLeft:r.__scrollLeft>r.__maxScrollLeft&&(n=r.__scrollLeft-r.__maxScrollLeft)),p&&(r.__scrollTop<0?a=-r.__scrollTop:r.__scrollTop>r.__maxScrollTop&&(a=r.__scrollTop-r.__maxScrollTop)),o=100*h/(u+a),i=100*c/(_+n);var d=Math.min(Math.max(0,r.__scrollTop),r.__maxScrollTop),f=Math.min(Math.max(0,r.__scrollLeft),r.__maxScrollLeft);this.vBar.state.posValue=100*(d+a)/l.clientHeight,this.hBar.state.posValue=100*(f+n)/l.clientWidth,r.__scrollLeft<0&&(this.hBar.state.posValue=0),r.__scrollTop<0&&(this.vBar.state.posValue=0)}this.vBar.state.size=o<100?o+"%":0,this.hBar.state.size=i<100?i+"%":0,e&&this.emitEvent(e,t)}},showBar:function(){this.vBar.state.opacity=this.mergedOptions.vBar.opacity,this.hBar.state.opacity=this.mergedOptions.hBar.opacity},hideBar:function(){this.vuescroll.state.isDragging||(this.mergedOptions.vBar.keepShow||this.vuescroll.state.mousedown||!this.vuescroll.state.pointerLeave||(this.vBar.state.opacity=0),this.mergedOptions.hBar.keepShow||this.vuescroll.state.mousedown||!this.vuescroll.state.pointerLeave||(this.hBar.state.opacity=0))},setMousedown:function(e){this.vuescroll.state.mousedown=e},registryResize:function(){var e=this;this.destroyResize&&this.destroyResize();var t="native"!==this.mode?this.scrollPanelElm:this.$refs.scrollContent._isVue?this.$refs.scrollContent.$el:this.$refs.scrollContent;window.addEventListener("resize",function(){e.update(),e.showBar(),e.hideBar()},!1);var o=[function(t){e.vuescroll.state.updateType="resize",e.update("handle-resize",t),e.showAndDefferedHideBar()}];this.destroyResize=listenResize(t,o)},registryScroller:function(){var e=this;this.scroller=new Scroller(render(this.scrollPanelElm,window),{zooming:!0});var t=this.$el.getBoundingClientRect();this.scroller.setPosition(t.left+this.$el.clientLeft,t.top+this.$el.clientTop);var o=listenContainer(this.$el,this.scroller,function(t){switch(t){case"mousedown":e.vuescroll.state.isDragging=!0;break;case"onscroll":e.handleScroll(!1);break;case"mouseup":e.vuescroll.state.isDragging=!1}});return this.updateScroller(),o}},mounted:function(){var e=this;this.$nextTick(function(){e._isDestroyed||("native"!==e.mode&&(e.destroyScroller=e.registryScroller()),e.registryResize(),e.$watch("mergedOptions.vuescroll.mode",function(){e.registryResize(),e.destroyScroller&&(e.destroyScroller(),e.destroyScroller=null),"native"!==e.mode?(e.destroyScroller=e.registryScroller(),e.scroller.scrollTo(e.vuescroll.state.internalScrollLeft,e.vuescroll.state.internalScrollTop,!1)):(e.scrollPanelElm.style.transform="",e.scrollTo({x:e.vuescroll.state.internalScrollLeft,y:e.vuescroll.state.internalScrollTop},!1))}),e.$watch("mergedOptions.vuescroll.mode",function(){"native"==e.mode?(e.vuescroll.state.internalScrollLeft=e.scroller.__scrollLeft,e.vuescroll.state.internalScrollTop=e.scroller.__scrollTop):(e.vuescroll.state.internalScrollLeft=e.scrollPanelElm.scrollLeft,e.vuescroll.state.internalScrollTop=e.scrollPanelElm.scrollTop)},{sync:!0}),e.update(),e.showBar(),e.hideBar())})},updated:function(){var e=this;this.$nextTick(function(){if(!e._isDestroyed){if("resize"==e.vuescroll.state.updateType)return void(e.vuescroll.state.updateType="");e.update(),e.showBar(),e.hideBar()}})},components:{bar:bar,rail:rail,scrollContent:scrollContent,scrollPanel:scrollPanel},props:{ops:{default:function(){return{vuescroll:{},scrollPanel:{},scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}}}},scroll={install:function(e){scroll.isInstalled?console.warn("You should not install the vuescroll again!"):(e.component(vuescroll.name,vuescroll),e.prototype.$vuescrollConfig=GCF,scroll.isInstalled=!0)}};module.exports=scroll;
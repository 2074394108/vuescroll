/*
    * @name: vuescroll 3.3.13
    * @author: (c) 2018-2018 wangyi7099
    * @description: A virtual scrollbar based on vue.js 2.x inspired by slimscroll
    * @license: MIT
    * @GitHub: https://github.com/wangyi7099/vuescroll
    */
"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var Vue=_interopDefault(require("vue")),vRail={name:"vRail",render:function(t){var e=this,o={position:"absolute",top:0,height:"100%",width:e.ops.width,background:e.ops.background,opacity:e.ops.opacity,borderRadius:"4px"};return"right"==e.ops.pos?o.right=0:o.left=0,t("div",{style:o,on:{click:function(t){e.$emit("scrollContentByBar",t,"vScrollbar")}}},this.$slots.default)},props:{ops:{default:function(){return{width:{default:"5px"},pos:{default:"left"},background:{default:"#a5d6a7"},opacity:{default:"0.5"}}}}}},vScrollbar={name:"vBar",computed:{computedTop:function(){return 100*this.state.top},computedHeight:function(){return 100*this.state.height}},render:function(t){var e=this,o={position:"absolute",top:0,height:e.computedHeight+"%",width:e.ops.width,background:e.ops.background,borderRadius:"4px",transform:"translateY("+e.computedTop+"%)",transition:"opacity .5s",cursor:"pointer",opacity:e.state.opacity,userSelect:"none"};return"right"==e.ops.pos?o.right=0:o.left=0,t("div",{style:o,class:"vScrollbar"})},props:{ops:{default:function(){return{background:"hsla(220,4%,58%,.3)",opacity:0,pos:"left",width:"5px"}}},state:{default:function(){return{top:{default:0},height:{default:0},opacity:{default:0}}}}}},hRail={name:"hRail",render:function(t){var e=this,o={position:"absolute",left:0,width:"100%",height:e.ops.height,background:e.ops.background,opacity:e.ops.opacity,borderRadius:"4px"};return"top"==e.ops.pos?o.top=0:o.bottom=0,t("div",{style:o,on:{click:function(t){e.$emit("scrollContentByBar",t,"hScrollbar")}}},this.$slots.default)},props:{ops:{default:function(){return{}}}}},hScrollbar={name:"hBar",computed:{computedLeft:function(){return 100*this.state.left},computedWidth:function(){return 100*this.state.width}},render:function(t){var e=this,o={position:"absolute",width:e.computedWidth+"%",height:e.ops.height,background:e.ops.background,borderRadius:"4px",transform:"translateX("+e.computedLeft+"%)",transition:"opacity .5s",cursor:"pointer",opacity:e.state.opacity,userSelect:"none"};return"top"==e.ops.pos?o.top=0:o.bottom=0,t("div",{style:o,class:"hScrollbar"})},props:{ops:{default:function(){return{}}},state:{default:function(){return{}}}}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function getComputed(t,e){return window.getComputedStyle(t).getPropertyValue(e)}function deepCopy(t,e){for(var o in e="object"===(void 0===e?"undefined":_typeof(e))&&e||{},t)e[o]="object"===_typeof(t[o])?deepCopy(t[o],e[o]={}):t[o];return e}function deepMerge(t,e){for(var o in e=e||{},t)"object"===_typeof(t[o])?e[o]?deepMerge(t[o],e[o]):(e[o]={},deepCopy(t[o],e[o])):e[o]||(e[o]=t[o]);return e}function defineReactive(t,e,o,r){r=r||e,Object.defineProperty(t,e,{get:function(){return o[r]}})}var scrollBarWidth=void 0;function getGutter(){if(Vue.prototype.$isServer)return 0;if(void 0!==scrollBarWidth)return scrollBarWidth;var t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",t.appendChild(o);var r=o.offsetWidth;return t.parentNode.removeChild(t),scrollBarWidth=e-r,getGutter.isUsed=!1,scrollBarWidth}var vueScrollContent={name:"scrollContent",render:function(t){var e=this,o=deepMerge(e.state.style,{});return o.height=e.ops.height,e.ops.padding&&(o[e.ops.paddPos]=e.ops.paddValue),t(e.ops.tag,{style:o,class:"scrollContent",props:e.ops.props,attrs:e.ops.attrs},this.$slots.default)},props:{ops:{default:function(){return{}}},state:{default:function(){return{}}}}},vueScrollPanel={name:"scrollPanel",render:function(t){var e=this,o=getGutter(),r={overflow:"scroll"};if(o)r.marginRight=-o+"px",r.height="calc(100% + "+o+"px)";else if(r.height="100%",!getGutter.isUsed){getGutter.isUsed=!0;var l=document.createElement("style");l.type="text/css",l.innerHTML=".vueScrollPanel::-webkit-scrollbar{width:0;height:0}",document.getElementsByTagName("HEAD").item(0).appendChild(l)}return t("div",{style:r,class:"vueScrollPanel",on:{scroll:function(t){e.$emit("scrolling",t)},wheel:function(t){e.$emit("wheeling",t)}}},this.$slots.default)}},GCF={scrollContent:{tag:"div",padding:!0,height:"100%",props:{},attrs:{}},vRail:{width:"5px",pos:"left",background:"#a5d6a7",opacity:0},vBar:{width:"5px",pos:"left",background:"#4caf50",deltaY:100,keepShow:!1,opacity:1},hRail:{height:"5px",pos:"bottom",background:"#a5d6a7",opacity:0},hBar:{height:"5px",pos:"bottom",background:"#4caf50",keepShow:!1,opacity:1}};function hackPropsData(){var t=this;if("vueScroll"===t.$options.name){var e=deepMerge(GCF,{});t.$options.propsData.ops=t.$options.propsData.ops||{},Object.keys(t.$options.propsData.ops).forEach(function(e){defineReactive(t.fOps,e,t.$options.propsData.ops)}),deepMerge(e,t.fOps),defineReactive(t.fOps.vBar,"pos",t.fOps.vRail),defineReactive(t.fOps.vBar,"width",t.fOps.vRail),defineReactive(t.fOps.hBar,"pos",t.fOps.hRail),defineReactive(t.fOps.hBar,"height",t.fOps.hRail);t.fOps.scrollContent.padding&&(Object.defineProperty(t.fOps.scrollContent,"paddPos",{get:function(){return"padding-"+t.fOps.vRail.pos}}),Object.defineProperty(t.fOps.scrollContent,"paddValue",{get:function(){return t.fOps.vRail.width}}))}}var LifeCycleMix={created:function(){hackPropsData.call(this)}},vueScroll={name:"vueScroll",mixins:[LifeCycleMix],data:function(){return{scrollPanel:{el:""},scrollContent:{state:{style:{minHeight:"100%",boxSizing:"border-box"}}},vRail:{el:""},vScrollbar:{el:"",state:{top:0,height:0,opacity:0}},hRail:{el:""},hScrollbar:{el:"",state:{left:0,width:0,opacity:0,pos:"bottom"}},listeners:[],mousedown:!1,isMouseLeavePanel:!0,isWheeling:!1,fOps:{scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}},render:function(t){var e=this;return t("div",{class:"vueScroll",style:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},on:{mouseenter:function(){e.isMouseLeavePanel=!1,e.showBar()},mouseleave:function(){e.isMouseLeavePanel=!0,e.hideBar()},mousemove:function(){e.isMouseLeavePanel=!1,e.showBar()}}},[t("scrollPanel",{ref:"scrollPanel",porps:{},on:{scrolling:e.scroll,wheeling:e.wheel}},[t("scrollContent",{props:{ops:e.fOps.scrollContent,state:e.scrollContent.state}},e.$slots.default)]),t("vRail",{props:{ops:e.fOps.vRail},on:{scrollContentByBar:e.scrollContentByBar},ref:"vRail"}),t("vBar",{props:{ops:e.fOps.vBar,state:e.vScrollbar.state},ref:"vScrollbar"}),t("hRail",{props:{ops:e.fOps.hRail},on:{scrollContentByBar:e.scrollContentByBar},ref:"hRail"}),t("hBar",{props:{ops:e.fOps.hBar,state:e.hScrollbar.state},ref:"hScrollbar"})])},mounted:function(){this.initEl(),this.initBarDrag(),this.listenPanelTouch(),this.showBar()},methods:{initEl:function(){this.scrollPanel.el=this.$refs.scrollPanel&&this.$refs.scrollPanel.$el,this.vScrollbar.el=this.$refs.vScrollbar&&this.$refs.vScrollbar.$el,this.hScrollbar.el=this.$refs.hScrollbar&&this.$refs.hScrollbar.$el,this.hRail.el=this.$refs.hRail&&this.$refs.hRail.$el,this.vRail.el=this.$refs.vRail&&this.$refs.vRail.$el},initBarDrag:function(){var t=this.listenBarDrag("vScrollbar"),e=this.listenBarDrag("hScrollbar");t(),e()},scrollTo:function(t){var e=t.x||this.scrollPanel.el.scrollLeft,o=t.y||this.scrollPanel.el.scrollTop;this.scrollPanel.el.scrollTo(e,o)},getBarPropertyValue:function(t,e,o){var r=e/o;return(o<=e||Math.abs(e-o)<=this.accuracy)&&(r=0),r},adjustBarPos:function(t,e,o,r){return parseFloat(o/e)},showBar:function(){this.showVBar(),this.showHBar()},hideBar:function(){this.hideVBar(),this.hideHBar()},showVBar:function(){if(!this.isMouseLeavePanel||this.fOps.vBar.keepShow||this.mousedown){var t=Math.floor(getComputed(this.scrollPanel.el,"height").replace("px","")),e=Math.floor(this.scrollPanel.el.scrollHeight),o=Math.floor(this.scrollPanel.el.scrollTop);(this.vScrollbar.state.height=this.getBarPropertyValue("vScrollbar",t,e))&&(this.vScrollbar.state.top=this.adjustBarPos(this.vScrollbar.state.height,t-0,o,e),this.vScrollbar.state.opacity=this.fOps.vBar.opacity)}},showHBar:function(){if(!this.isMouseLeavePanel||this.fOps.hBar.keepShow||this.mousedown){var t=Math.floor(getComputed(this.scrollPanel.el,"width").replace("px","")),e=Math.floor(this.scrollPanel.el.scrollWidth),o=Math.floor(this.scrollPanel.el.scrollLeft);(this.hScrollbar.state.width=this.getBarPropertyValue("hScrollbar",t,e))&&(this.hScrollbar.state.left=this.adjustBarPos(this.hScrollbar.state.width,t-0,o,e),this.hScrollbar.state.opacity=this.fOps.hBar.opacity)}},hideVBar:function(){this.fOps.vBar.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.vScrollbar.state.opacity=0)},hideHBar:function(){this.fOps.hBar.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.hScrollbar.state.opacity=0)},wheel:function(t){var e=this.fOps.vBar.deltaY;this.isWheeling=!0,this.showVBar(),this.scrollBar(t.deltaY>0?e:-e,"vScrollbar"),t.preventDefault(),t.stopPropagation()},scroll:function(t){if(this.isWheeling)return t.preventDefault(),void(this.isWheeling=!1);this.showBar()},scrollBar:function(t,e){var o="vScrollbar"==e?"top":"left",r="vScrollbar"==e?"Top":"Left",l="vScrollbar"==e?"height":"width",s="vScrollbar"==e?"Height":"Width",a="vScrollbar"==e?"vscroll":"hscroll",i="vScrollbar"==e?"showVBar":"showHBar",n=(this[e].state[o],getComputed(this.scrollPanel.el,l).replace("px",""));"vScrollbar"==e&&(n=n);var c=this.scrollPanel.el["scroll"+s],h=this.scrollPanel.el["scroll"+r],p=(this[e].state[l],Math.round(h+t));t<0?this.scrollPanel.el["scroll"+r]=Math.max(0,p):t>0&&(this.scrollPanel.el["scroll"+r]=Math.min(c-n,p)),this[i]();var u,d={},f={};p=this.scrollPanel.el["scroll"+r],d.residual=c-p-n,d.scrolled=p,f.scrolled=this[e].state[o],f.residual=d.residual/c*n,f[l]=this[e].state[l]*n,u=p/(c-n),f.name=e,d.name="content",this.$emit(a,f,d,u)},_scrollContent:function(t,e){var o="vScrollbar"==e?"height":"width",r="vScrollbar"==e?"Height":"Width",l=getComputed(this.scrollPanel.el,o).replace("px","");"vScrollbar"==e&&(l=l);var s=this.scrollPanel.el["scroll"+r]*(t/l);this.scrollBar(s,e)},scrollContentByBar:function(t,e){var o="vScrollbar"===e?"y":"x",r=this[e].el.getBoundingClientRect(),l=t[o]-r[o]-r.height/2;this._scrollContent(l,e)},listenBarDrag:function(t){var e=this,o="vScrollbar"===t?"pageY":"pageX",r="vScrollbar"===t?"VBar":"HBar";return function(){var l=void 0,s=void 0;function a(a){var i=(s=a[o])-l;e["show"+r](),e._scrollContent(i,t),l=s}function i(t){t.stopPropagation(),e.mousedown=!0,l=t[o],e["show"+r](),document.addEventListener("mousemove",a),document.addEventListener("mouseup",function(t){e.mousedown=!1,e["hide"+r](),document.removeEventListener("mousemove",a)})}e.listeners.push({dom:e[t].el,event:i,type:"mousedown"}),e[t].el.addEventListener("mousedown",i)}},listenPanelTouch:function(){var t=this,e=this.scrollPanel.el;function o(o){o.touches.length&&(o.stopPropagation(),t.mousedown=!0,t.showBar(),e.addEventListener("touchend",function(e){t.mousedown=!1,t.hideBar()}))}e.addEventListener("touchstart",o),t.listeners.push({dom:e,event:o,type:"touchstart"})}},beforeDestroy:function(){this.listeners.forEach(function(t){t.dom.removeEventListener(t.type,t.event)})},updated:function(){this.showBar(),this.hideBar()},props:{ops:{default:function(){return{scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}},accuracy:{default:5}}},scroll={install:function(t){scroll.isInstalled?console.warn("You should not install the vuescroll again!"):(t.component(vRail.name,vRail),t.component(vScrollbar.name,vScrollbar),t.component(hRail.name,hRail),t.component(hScrollbar.name,hScrollbar),t.component(vueScrollContent.name,vueScrollContent),t.component(vueScrollPanel.name,vueScrollPanel),t.component(vueScroll.name,vueScroll),t.prototype.$vuescrollConfig=GCF,scroll.isInstalled=!0)}};module.exports=scroll;
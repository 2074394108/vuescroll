/*
    * @name: vuescroll 3.7.10
    * @author: (c) 2018-2018 wangyi7099
    * @description: A virtual scrollbar based on vue.js 2.x
    * @license: MIT
    * @GitHub: https://github.com/wangyi7099/vuescroll
    */
import Vue from"vue";var map={vertical:{bar:{size:"height",opsSize:"width",posName:"top",page:"pageY",scroll:"scrollTop",scrollSize:"scrollHeight",offset:"offsetHeight",client:"clientY"},axis:"Y"},horizontal:{bar:{size:"width",opsSize:"height",posName:"left",page:"pageX",scroll:"scrollLeft",scrollSize:"scrollWidth",offset:"offsetWidth",client:"clientX"},axis:"X"}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function deepCopy(e,t){for(var o in t="object"===(void 0===t?"undefined":_typeof(t))&&t||{},e)t[o]="object"===_typeof(e[o])?deepCopy(e[o],t[o]={}):e[o];return t}function deepMerge(e,t){for(var o in t=t||{},e)"object"===_typeof(e[o])?void 0===t[o]?(t[o]={},deepCopy(e[o],t[o])):deepMerge(e[o],t[o]):void 0===t[o]&&(t[o]=e[o]);return t}function defineReactive(e,t,o,r){var i=null;(o[t]||"function"==typeof o)&&(r=r||t,"function"==typeof o&&(i=o),Object.defineProperty(e,t,{get:i||function(){return o[r]},configurable:!0}))}var scrollBarWidth=void 0;function getGutter(){if(Vue.prototype.$isServer)return 0;if(void 0!==scrollBarWidth)return scrollBarWidth;var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",e.appendChild(o);var r=o.offsetWidth;return e.parentNode.removeChild(e),scrollBarWidth=t-r,getGutter.isUsed=!1,scrollBarWidth}var haveHideen=!1;function hideSystemBar(){if(!haveHideen){haveHideen=!0;var e=document.createElement("style");e.type="text/css",e.innerHTML=".vuescroll-panel::-webkit-scrollbar{width:0;height:0}",document.getElementsByTagName("HEAD").item(0).appendChild(e)}}function renderTransform(e,t){return{transform:"translate"+map[e].axis+"("+t+"%)",msTransform:"translate"+map[e].axis+"("+t+"%)",webkitTransform:"translate"+map[e].axis+"("+t+"%)"}}function on(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,o,r)}function off(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener(t,o,r)}function easingPattern(e,t){var o=null;return"easeInQuad"===e&&(o=t*t),"easeOutQuad"===e&&(o=t*(2-t)),"easeInOutQuad"===e&&(o=t<.5?2*t*t:(4-2*t)*t-1),"easeInCubic"===e&&(o=t*t*t),"easeOutCubic"===e&&(o=--t*t*t+1),"easeInOutCubic"===e&&(o=t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),"easeInQuart"===e&&(o=t*t*t*t),"easeOutQuart"===e&&(o=1- --t*t*t*t),"easeInOutQuart"===e&&(o=t<.5?8*t*t*t*t:1-8*--t*t*t*t),"easeInQuint"===e&&(o=t*t*t*t*t),"easeOutQuint"===e&&(o=1+--t*t*t*t*t),"easeInOutQuint"===e&&(o=t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t),o||t}function goScrolling(e,t,o,r,i){var n=null,s=null,a=null,l=e.scrollTop,c=e.scrollLeft;l+o<0&&(o=-l),l+o>e.scrollHeight&&(o=e.scrollHeight-l),c+t<0&&(t=-c),c+t>e.scrollWidth&&(t=e.scrollWidth-c);requestAnimationFrame(function p(d){n||(n=d);var u=d-n,h=u/r>1?1:u/r;s=c+t*easingPattern(i,h),a=l+o*easingPattern(i,h),(Math.abs(a-l)<=Math.abs(o)||Math.abs(s-c)<=Math.abs(t))&&(e.scrollTop=Math.floor(a),e.scrollLeft=Math.floor(s),h<1&&requestAnimationFrame(p))})}function listenResize(e,t){if(!e.isResized){window.getComputedStyle(e);var o=document.createElement("object");e.isResized=!0,o.style.cssText="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",o.tabIndex=-1,o.type="text/html",o.onload=function(){t.forEach(function(e){on(o.contentDocument.defaultView,"resize",e)})},e.appendChild(o)}}var GCF={scrollPanel:{initialScrollY:!1,initialScrollX:!1,speed:300,easing:void 0},scrollContent:{tag:"div",padding:!0,props:{},attrs:{}},vRail:{width:"5px",pos:"right",background:"#a5d6a7",opacity:0},hRail:{height:"5px",pos:"bottom",background:"#a5d6a7",opacity:0},vBar:{width:"5px",pos:"right",background:"#4caf50",deltaY:100,keepShow:!1,opacity:1,hover:!1},hBar:{height:"5px",pos:"bottom",background:"#4caf50",keepShow:!1,opacity:1,hover:!1}};function hackPropsData(){var e=this;if("vueScroll"===e.$options.name){var t=deepMerge(GCF,{});e.$options.propsData.ops=e.$options.propsData.ops||{},Object.keys(e.$options.propsData.ops).forEach(function(t){defineReactive(e.mergedOptions,t,e.$options.propsData.ops)}),deepMerge(t,e.mergedOptions),defineReactive(e.mergedOptions.vBar,"pos",e.mergedOptions.vRail),defineReactive(e.mergedOptions.vBar,"width",e.mergedOptions.vRail),defineReactive(e.mergedOptions.hBar,"pos",e.mergedOptions.hRail),defineReactive(e.mergedOptions.hBar,"height",e.mergedOptions.hRail);defineReactive(e.mergedOptions.scrollContent,"paddPos",function(){return"padding-"+e.mergedOptions.vRail.pos}),defineReactive(e.mergedOptions.scrollContent,"paddValue",function(){return e.mergedOptions.vRail.width})}}var LifeCycleMix={created:function(){hackPropsData.call(this)}};function extractScrollDistance(e,t,o){var r=void 0;return(r=/(\d+)%$/.exec(e))?(r=r[1],r=o[t]*r/100):r=e,r}var vuescrollApi={methods:{scrollTo:function(e){void 0===e.x?e.x=this.$refs.scrollPanel.$el.scrollLeft:e.x=extractScrollDistance(e.x,"scrollWidth",this.scrollPanelElm),void 0===e.y?e.y=this.$refs.scrollPanel.$el.scrollTop:e.y=extractScrollDistance(e.y,"scrollHeight",this.scrollPanelElm);var t=e.x,o=e.y;goScrolling(this.$refs.scrollPanel.$el,t-this.$refs.scrollPanel.$el.scrollLeft,o-this.$refs.scrollPanel.$el.scrollTop,this.mergedOptions.scrollPanel.speed,this.mergedOptions.scrollPanel.easing)},forceUpdate:function(){var e=this;this.$forceUpdate(),Object.keys(this.$refs).forEach(function(t){var o=e.$refs[t];o._isVue&&o.$forceUpdate()})}}},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var bar={name:"bar",computed:{bar:function(){return map[this.type].bar},parent:function(){return this.$parent.$refs}},render:function(e){var t,o=this,r={style:_extends((_defineProperty(t={},this.bar.posName,0),_defineProperty(t,this.ops.pos,0),_defineProperty(t,this.bar.size,this.state.size),_defineProperty(t,this.bar.opsSize,this.ops[this.bar.opsSize]),_defineProperty(t,"background",this.ops.background),_defineProperty(t,"opacity",this.state.opacity),_defineProperty(t,"cursor","pointer"),_defineProperty(t,"position","absolute"),_defineProperty(t,"borderRadius","4px"),_defineProperty(t,"transition","opacity .5s"),_defineProperty(t,"cursor","pointer"),_defineProperty(t,"userSelect","none"),t),renderTransform(this.type,this.state.posValue)),class:"vuescroll-"+this.type+"-scrollbar",on:{mousedown:this.handleMousedown}};return this.ops.hover&&(r.on.mouseenter=function(){o.$el.style.background=o.ops.hover},r.on.mouseleave=function(){o.$el.style.background=o.ops.background}),e("div",r)},methods:{handleMousedown:function(e){e.stopPropagation(),this.axisStartPos=e[this.bar.client]-this.$el.getBoundingClientRect()[this.bar.posName],this.$emit("setMousedown",!0),on(document,"mousemove",this.handleMouseMove),on(document,"mouseup",this.handleMouseUp)},handleMouseMove:function(e){if(this.axisStartPos){var t=(e[this.bar.client]-this.parent[this.type+"Rail"].getBoundingClientRect()[this.bar.posName]-this.axisStartPos)/this.parent[this.type+"Rail"][this.bar.offset];this.parent.scrollPanel.$el[this.bar.scroll]=this.parent.scrollPanel.$el[this.bar.scrollSize]*t}},handleMouseUp:function(){this.$emit("setMousedown",!1),this.$parent.hideBar(),this.axisStartPos=0,off(document,"mousemove",this.handleMouseMove),off(document,"mouseup",this.handleMouseUp)}},props:{ops:{type:Object,required:!0},state:{type:Object,required:!0},type:{type:String,required:!0}}};function _defineProperty$1(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function handleClickTrack(e,t,o,r,i){var n=t.page,s=o[r+"Bar"].$el[t.offset],a=(e[n]-e.target.getBoundingClientRect()[t.posName]-s/2)/e.target[t.offset],l=o.scrollPanel.$el[t.scrollSize]*a;i.scrollTo(_defineProperty$1({},map[r].axis.toLowerCase(),l))}var rail={name:"rail",functional:!0,render:function(e,t){var o,r=t.parent,i=t.props,n=map[i.type].bar,s=r.$refs;return e("div",{style:(_defineProperty$1(o={},n.posName,0),_defineProperty$1(o,i.ops.pos,0),_defineProperty$1(o,n.size,"100%"),_defineProperty$1(o,n.opsSize,i.ops[n.opsSize]),_defineProperty$1(o,"background",i.ops.background),_defineProperty$1(o,"opacity",i.ops.opacity),_defineProperty$1(o,"position","absolute"),_defineProperty$1(o,"cursor","pointer"),_defineProperty$1(o,"borderRadius","4px"),o),class:"vuescroll-"+i.type+"-rail",ref:i.type+"Rail",on:{click:function(e){handleClickTrack(e,n,s,i.type,r)}}})}},scrollContent={name:"scrollContent",functional:!0,render:function(e,t){var o=t.props,r=t.slots,i=deepMerge(o.state.style,{});return i.position="relative",i.minHeight="100%",o.ops.padding&&(i[o.ops.paddPos]=o.ops.paddValue),e(o.ops.tag,{style:i,ref:"scrollContent",class:"vuescroll-content",props:o.ops.props,attrs:o.ops.attrs},r().default)},props:{ops:{default:function(){return{}}},state:{default:function(){return{}}}}},scrollPanel={name:"scrollPanel",methods:{updateInitialScroll:function(){var e=0,t=0;this.ops.initialScrollX&&(e=this.ops.initialScrollX),this.ops.initialScrollY&&(t=this.ops.initialScrollY),this.$parent.scrollTo({x:e,y:t})}},mounted:function(){var e=this;this.$nextTick(function(){e._isDestroyed||e.updateInitialScroll()})},render:function(e){return e("div",{class:["vuescroll-panel"]},[[this.$slots.default]])},props:{ops:{default:function(){return{}},validator:function(e){var t=!0,o=(e=e||{}).initialScrollY,r=e.initialScrollX;return o&&!String(o).match(/^\d+(\.\d+)?(%)?$/)&&(console.error("[vuescroll]: The prop `initialScrollY` should be a percent number like 10% or an exact number that greater than or equal to 0 like 100."),t=!1),r&&!String(r).match(/^\d+(\.\d+)?(%)?$/)&&(console.error("[vuescroll]: The prop `initialScrollX` should be a percent number like 10% or an exact number that greater than or equal to 0 like 100."),t=!1),t}}}};function createPanel(e,t){var o={ref:"scrollPanel",style:{},nativeOn:{scroll:t.handleScroll},props:{ops:t.mergedOptions.scrollPanel}};o.style.overflowY=t.vBar.state.size?"scroll":"inherit",o.style.overflowX=t.hBar.state.size?"scroll":"inherit";getGutter();return getGutter.isUsed||(getGutter.isUsed=!0),hideSystemBar(),o.style.height="100%",e("scrollPanel",o,[createContent(e,t)])}function createContent(e,t){return e("scrollContent",{props:{ops:t.mergedOptions.scrollContent}},[[t.$slots.default]])}function createRail(e,t,o){var r="vertical"===o?"vRail":"hRail",i="vertical"===o?"vBar":"hBar",n={props:{type:o,ops:t.mergedOptions[r],state:t[r].state}};return t[i].state.size?e("rail",n):null}function createBar(e,t,o){var r="vertical"===o?"vBar":"hBar",i={props:{type:o,ops:t.mergedOptions[r],state:t[r].state},on:{setMousedown:t.setMousedown},ref:o+"Bar"};return t[r].state.size?e("bar",i):null}var vuescroll={name:"vueScroll",mixins:[LifeCycleMix,vuescrollApi],data:function(){return{scrollPanel:{el:""},scrollContent:{},vRail:{state:{}},hRail:{state:{}},vBar:{state:{posValue:0,size:0,opacity:0}},hBar:{state:{posValue:0,size:0,opacity:0}},listeners:[],mousedown:!1,pointerLeave:!0,timeoutId:0,updateType:"",mergedOptions:{scrollPanel:{},scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}},render:function(e){var t=this,o={style:{position:"relative",height:"100%",width:"100%",padding:0},class:"vue-scroll",on:{mouseenter:function(){t.pointerLeave=!1,t.showBar(),t.update()},mouseleave:function(){t.pointerLeave=!0,t.hideBar()},mousemove:function(){t.pointerLeave=!1,t.showBar(),t.update()}}};return o.style.overflowY=t.vBar.state.size?"hidden":"inherit",o.style.overflowX=t.hBar.state.size?"hidden":"inherit",e("div",o,[createPanel(e,t),createRail(e,t,"vertical"),createBar(e,t,"vertical"),createRail(e,t,"horizontal"),createBar(e,t,"horizontal")])},computed:{scrollPanelElm:function(){return this.$refs.scrollPanel.$el}},methods:{handleScroll:function(){this.update(),this.showAndDefferedHideBar()},showAndDefferedHideBar:function(){var e=this;this.showBar(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){e.timeoutId=0,e.hideBar()},500)},triggerScrollEvent:function(){var e=this.scrollPanelElm,t={},o={};t.process=e.scrollTop/(e.scrollHeight-e.clientHeight),o.process=e.scrollLeft/(e.scrollWidth-e.clientWidth),t.barSize=this.vBar.state.size,o.barSize=this.hBar.state.size,this.$emit("handle-scroll",t,o)},update:function(){var e,t,o=this.scrollPanelElm;o&&(e=100*o.clientHeight/o.scrollHeight,t=100*o.clientWidth/o.scrollWidth,this.vBar.state.size=e<100?e+"%":0,this.hBar.state.size=t<100?t+"%":0,this.vBar.state.posValue=100*o.scrollTop/o.clientHeight,this.hBar.state.posValue=100*o.scrollLeft/o.clientWidth,this.triggerScrollEvent())},showBar:function(){this.vBar.state.opacity=this.mergedOptions.vBar.opacity,this.hBar.state.opacity=this.mergedOptions.hBar.opacity},hideBar:function(){this.mergedOptions.vBar.keepShow||this.mousedown||!this.pointerLeave||(this.vBar.state.opacity=0),this.mergedOptions.hBar.keepShow||this.mousedown||!this.pointerLeave||(this.hBar.state.opacity=0)},setMousedown:function(e){this.mousedown=e}},mounted:function(){var e=this;this.$nextTick(function(){if(!e._isDestroyed){e.update(),e.showBar(),e.hideBar(),window.addEventListener("resize",function(){e.update(),e.showBar(),e.hideBar()},!1);var t=[function(){e.updateType="resize",e.update(),e.showAndDefferedHideBar()}];e.$listeners["handle-resize"]&&t.push(e.$listeners["handle-resize"]),listenResize(e.$refs.scrollContent._isVue?e.$refs.scrollContent.$el:e.$refs.scrollContent,t)}})},updated:function(){var e=this;this.$nextTick(function(){if(!e._isDestroyed){if("resize"==e.updateType)return void(e.updateType="");e.update(),e.showBar(),e.hideBar()}})},components:{bar:bar,rail:rail,scrollContent:scrollContent,scrollPanel:scrollPanel},props:{ops:{default:function(){return{scrollPanel:{},scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}}}},scroll={install:function(e){scroll.isInstalled?console.warn("[vuescroll]:You should not install the vuescroll again!"):(e.component(vuescroll.name,vuescroll),e.prototype.$vuescrollConfig=GCF,scroll.isInstalled=!0)}};export default scroll;
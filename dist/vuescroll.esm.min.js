/*
    * @name: vuescroll 3.5.4
    * @author: (c) 2018-2018 wangyi7099
    * @description: A virtual scrollbar based on vue.js 2.x
    * @license: MIT
    * @GitHub: https://github.com/wangyi7099/vuescroll
    */
import Vue from"vue";var map={vertical:{bar:{size:"height",opsSize:"width",posName:"top",page:"pageY",scroll:"scrollTop",scrollSize:"scrollHeight",offset:"offsetHeight",client:"clientY"},axis:"Y"},horizontal:{bar:{size:"width",opsSize:"height",posName:"left",page:"pageX",scroll:"scrollLeft",scrollSize:"scrollWidth",offset:"offsetWidth",client:"clientX"},axis:"X"}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function deepCopy(e,t){for(var r in t="object"===(void 0===t?"undefined":_typeof(t))&&t||{},e)t[r]="object"===_typeof(e[r])?deepCopy(e[r],t[r]={}):e[r];return t}function deepMerge(e,t){for(var r in t=t||{},e)"object"===_typeof(e[r])?t[r]?deepMerge(e[r],t[r]):(t[r]={},deepCopy(e[r],t[r])):t[r]||(t[r]=e[r]);return t}function defineReactive(e,t,r,o){var i=null;(r[t]||"function"==typeof r)&&(o=o||t,"function"==typeof r&&(i=r),Object.defineProperty(e,t,{get:i||function(){return r[o]},configurable:!0}))}var scrollBarWidth=void 0;function getGutter(){if(Vue.prototype.$isServer)return 0;if(void 0!==scrollBarWidth)return scrollBarWidth;var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var r=document.createElement("div");r.style.width="100%",e.appendChild(r);var o=r.offsetWidth;return e.parentNode.removeChild(e),scrollBarWidth=t-o,getGutter.isUsed=!1,scrollBarWidth}function renderTransform(e,t){return{transform:"translate"+map[e].axis+"("+t+"%)",msTransform:"translate"+map[e].axis+"("+t+"%)",webkitTransform:"translate"+map[e].axis+"("+t+"%)"}}function on(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,r,o)}function off(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener(t,r,o)}var GCF={vuescroll:{style:{position:"relative",height:"100%",width:"100%",padding:0,overflow:"hidden"},class:["vueScroll"]},scrollPanel:{initialScrollY:!1,initialScrollX:!1},scrollContent:{tag:"div",padding:!0,height:"100%",props:{},attrs:{}},vRail:{width:"5px",pos:"right",background:"#a5d6a7",opacity:0},vBar:{width:"5px",pos:"right",background:"#4caf50",deltaY:100,keepShow:!1,opacity:1},hRail:{height:"5px",pos:"bottom",background:"#a5d6a7",opacity:0},hBar:{height:"5px",pos:"bottom",background:"#4caf50",keepShow:!1,opacity:1}};function hackPropsData(){var e=this;if("vueScroll"===e.$options.name){var t=deepMerge(GCF,{});e.$options.propsData.ops=e.$options.propsData.ops||{},Object.keys(e.$options.propsData.ops).forEach(function(t){defineReactive(e.mergedOptions,t,e.$options.propsData.ops)}),deepMerge(t,e.mergedOptions),defineReactive(e.mergedOptions.vBar,"pos",e.mergedOptions.vRail),defineReactive(e.mergedOptions.vBar,"width",e.mergedOptions.vRail),defineReactive(e.mergedOptions.hBar,"pos",e.mergedOptions.hRail),defineReactive(e.mergedOptions.hBar,"height",e.mergedOptions.hRail);e.mergedOptions.scrollContent.padding&&(defineReactive(e.mergedOptions.scrollContent,"paddPos",function(){return"padding-"+e.mergedOptions.vRail.pos}),defineReactive(e.mergedOptions.scrollContent,"paddValue",function(){return e.mergedOptions.vRail.width}))}}var LifeCycleMix={created:function(){hackPropsData.call(this)}},vuescrollApi={methods:{scrollTo:function(e){var t=e.x||this.$refs.scrollPanel.$el.scrollLeft,r=e.y||this.$refs.scrollPanel.$el.scrollTop;this.$refs.scrollPanel.$el.scrollTo(t,r)},forceUpdate:function(){var e=this;this.$forceUpdate(),Object.keys(this.$refs).forEach(function(t){e.$refs[t].$forceUpdate()})}}},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bar={name:"bar",computed:{bar:function(){return map[this.type].bar},parent:function(){return this.$parent.$refs}},render:function(e){var t;return e("div",{style:_extends((_defineProperty(t={},this.bar.posName,0),_defineProperty(t,this.ops.pos,0),_defineProperty(t,this.bar.size,this.state.size),_defineProperty(t,this.bar.opsSize,this.ops[this.bar.opsSize]),_defineProperty(t,"background",this.ops.background),_defineProperty(t,"opacity",this.state.opacity),_defineProperty(t,"cursor","pointer"),_defineProperty(t,"position","absolute"),_defineProperty(t,"borderRadius","4px"),_defineProperty(t,"transition","opacity .5s"),_defineProperty(t,"cursor","pointer"),_defineProperty(t,"userSelect","none"),t),renderTransform(this.type,this.state.posValue)),class:this.type+"Scrollbar",on:{mousedown:this.handleMousedown}})},methods:{handleMousedown:function(e){e.stopPropagation(),this.axisStartPos=e[this.bar.client]-this.$el.getBoundingClientRect()[this.bar.posName],this.$emit("setMousedown",!0),on(document,"mousemove",this.handleMouseMove),on(document,"mouseup",this.handleMouseUp)},handleMouseMove:function(e){if(this.axisStartPos){var t=(e[this.bar.client]-this.parent[this.type+"Rail"].$el.getBoundingClientRect()[this.bar.posName]-this.axisStartPos)/this.parent[this.type+"Rail"].$el[this.bar.offset];this.parent.scrollPanel.$el[this.bar.scroll]=this.parent.scrollPanel.$el[this.bar.scrollSize]*t}},handleMouseUp:function(){this.$emit("setMousedown",!1),this.$parent.hideBar(),this.axisStartPos=0,off(document,"mousemove",this.handleMouseMove),off(document,"mouseup",this.handleMouseUp)}},props:{ops:{type:Object,required:!0},state:{type:Object,required:!0},type:{type:String,required:!0}}};function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rail={name:"rail",computed:{bar:function(){return map[this.type].bar},parentRef:function(){return this.$parent.$refs}},methods:{handleClickTrack:function(e){var t=this.bar.page,r=this.parentRef[this.type+"Bar"].$el[this.bar.offset],o=(e[t]-e.target.getBoundingClientRect()[this.bar.posName]-r/2)/e.target[this.bar.offset];this.parentRef.scrollPanel.$el[this.bar.scroll]=this.parentRef.scrollPanel.$el[this.bar.scrollSize]*o}},render:function(e){var t,r=this;return e("div",{style:(_defineProperty$1(t={},r.bar.posName,0),_defineProperty$1(t,r.ops.pos,0),_defineProperty$1(t,r.bar.size,"100%"),_defineProperty$1(t,r.bar.opsSize,r.ops[r.bar.opsSize]),_defineProperty$1(t,"background",r.ops.background),_defineProperty$1(t,"opacity",r.ops.opacity),_defineProperty$1(t,"position","absolute"),_defineProperty$1(t,"cursor","pointer"),_defineProperty$1(t,"borderRadius","4px"),t),class:this.type+"Rail",on:{click:this.handleClickTrack}})},props:{type:{required:!0,type:String},ops:{required:!0,type:Object},state:{required:!0,type:Object}}},scrollContent={name:"scrollContent",render:function(e){var t=this,r=deepMerge(t.state.style,{});return r.height=t.ops.height,t.ops.padding&&(r[t.ops.paddPos]=t.ops.paddValue),e(t.ops.tag,{style:r,class:"scrollContent",props:t.ops.props,attrs:t.ops.attrs},this.$slots.default)},props:{ops:{default:function(){return{}}},state:{default:function(){return{}}}}},scrollPanel={name:"scrollPanel",methods:{extractScrollDistance:function(e,t){var r=void 0;return(r=/(\d+)%$/.exec(e))?(r=r[1],r=this.$el[t]*r/100):r=e,r},updateInitialScroll:function(){if(this.ops.initialScrollX){var e=this.extractScrollDistance(this.ops.initialScrollX,"scrollWidth");this.$el.scrollLeft=e}if(this.ops.initialScrollY){var t=this.extractScrollDistance(this.ops.initialScrollY,"scrollHeight");this.$el.scrollTop=t}}},mounted:function(){this.updateInitialScroll()},updated:function(){this.updateInitialScroll()},render:function(e){var t=getGutter(),r={overflow:"scroll"};if(t)r.marginRight=-t+"px",r.height="calc(100% + "+t+"px)",r.marginBottom=-t+"px";else if(r.height="100%",!getGutter.isUsed){getGutter.isUsed=!0;var o=document.createElement("style");o.type="text/css",o.innerHTML=".vueScrollPanel::-webkit-scrollbar{width:0;height:0}",document.getElementsByTagName("HEAD").item(0).appendChild(o)}return e("div",{style:r,class:["scrollPanel"]},[[this.$slots.default]])},props:{ops:{default:function(){return{}},validator:function(e){var t=!0,r=(e=e||{}).initialScrollY,o=e.initialScrollX;return r&&!String(r).match(/^\d+(\.\d+)?(%)?$/)&&(console.error("[vuescroll]: The prop `initialScrollY` should be a percent number like 10% or an exact number that greater than or equal to 0 like 100."),t=!1),o&&!String(o).match(/^\d+(\.\d+)?(%)?$/)&&(console.error("[vuescroll]: The prop `initialScrollX` should be a percent number like 10% or an exact number that greater than or equal to 0 like 100."),t=!1),t}}}},vuescroll={name:"vueScroll",mixins:[LifeCycleMix,vuescrollApi],data:function(){return{scrollPanel:{el:""},scrollContent:{},vRail:{state:{}},hRail:{state:{}},vBar:{state:{posValue:0,size:0,opacity:0}},hBar:{state:{posValue:0,size:0,opacity:0}},listeners:[],mousedown:!1,mergedOptions:{scrollPanel:{},scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}},render:function(e){var t=this,r={style:GCF.vuescroll.style,class:GCF.vuescroll.class,on:{mouseenter:function(){t.showBar()},mouseleave:function(){t.hideBar()}}},o={ref:"scrollPanel",nativeOn:{scroll:t.handleScroll},props:{ops:t.mergedOptions.scrollPanel}},i={props:{ops:t.mergedOptions.scrollContent},ref:"scrollContent"},s={props:{type:"vertical",ops:t.mergedOptions.vBar,state:t.vBar.state},on:{setMousedown:this.setMousedown},ref:"verticalBar"},n={props:{type:"vertical",ops:t.mergedOptions.vRail,state:t.vRail.state},ref:"verticalRail"},a={props:{type:"horizontal",ops:t.mergedOptions.hBar,state:t.hBar.state},on:{setMousedown:this.setMousedown},ref:"horizontalBar"},l={props:{type:"horizontal",ops:t.mergedOptions.hRail,state:t.hRail.state},ref:"horizontalRail"};return e("div",r,[e("scrollPanel",o,[e("scrollContent",i,[[t.$slots.default]])]),e("rail",n),e("bar",s),e("rail",l),e("bar",a)])},computed:{scrollPanelElm:function(){return this.$refs.scrollPanel.$el}},methods:{handleScroll:function(){this.update()},triggerScrollEvent:function(){var e=this.scrollPanelElm,t={},r={};t.process=e.scrollTop/(e.scrollHeight-e.clientHeight),r.process=e.scrollLeft/(e.scrollWidth-e.clientWidth),t.barSize=this.vBar.state.size,r.barSize=this.hBar.state.size,this.$emit("handle-scroll",t,r)},update:function(){var e,t,r=this.scrollPanelElm;r&&(e=100*r.clientHeight/(r.scrollHeight-this.accuracy),t=100*r.clientWidth/(r.scrollWidth-this.accuracy),this.vBar.state.size=e<100?e+"%":"",this.hBar.state.size=t<100?t+"%":"",this.vBar.state.posValue=100*r.scrollTop/r.clientHeight,this.hBar.state.posValue=100*r.scrollLeft/r.clientWidth,this.triggerScrollEvent())},showBar:function(){this.vBar.state.opacity=this.mergedOptions.vBar.opacity,this.hBar.state.opacity=this.mergedOptions.hBar.opacity},hideBar:function(){this.mergedOptions.vBar.keepShow||this.mousedown||(this.vBar.state.opacity=0),this.mergedOptions.hBar.keepShow||this.mousedown||(this.hBar.state.opacity=0)},setMousedown:function(e){this.mousedown=e}},mounted:function(){var e=this;this.$nextTick(function(){e.update(),e.showBar(),e.hideBar()})},updated:function(){var e=this;this.$nextTick(function(){e.update(),e.showBar(),e.hideBar()})},components:{bar:bar,rail:rail,scrollContent:scrollContent,scrollPanel:scrollPanel},props:{ops:{default:function(){return{scrollPanel:{},scrollContent:{},vRail:{},vBar:{},hRail:{},hBar:{}}}},accuracy:{default:0,validator:function(e){return!(e<0)||(console.error("[vuescroll]:The prop `accury` must be 0 or higher!"),!1)}}}},scroll={install:function(e){scroll.isInstalled?console.warn("[vuescroll]:You should not install the vuescroll again!"):(e.component(vuescroll.name,vuescroll),e.prototype.$vuescrollConfig=GCF,scroll.isInstalled=!0)}};export default scroll;
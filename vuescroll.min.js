/*
 * @name: vuescroll 3.0.0
 * @author: wangyi
 * @description: A virtual scrollbar based on vue.js 2.x inspired by slimscroll
 * @license: MIT
 * @GitHub: https://github.com/wangyi7099/vuescroll
 */
!function(t,e){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module?module.exports=e():t.Vue.use(e())}(this,function(){var t={install:function(t){t.component(l.name,l),t.component(r.name,r),t.component(s.name,s),t.component(a.name,a),t.component(o.name,o),t.component(i.name,i)}};function e(t,e){return window.getComputedStyle(t).getPropertyValue(e)}var o={name:"vueScrollPanel",render:function(t){var e=this.scrollContentStyle;return e.overflow="hidden",t("div",{style:e,class:"vueScrollPanel"},this.$slots.default)},props:{scrollContentStyle:{}}},l={name:"vRail",render:function(t){var e=this,o={position:"absolute",top:0,height:"100%",width:e.ops.width,background:e.ops.railBackground,opacity:"0.5",borderRadius:"4px"};return"right"==e.ops.pos?o.right=0:o.left=0,t("div",{style:o,on:{click:function(t){e.$emit("scrollContentByBar",t,"vScrollbar")}}},this.$slots.default)},props:{ops:{width:{default:"5px"},pos:{default:"left"},railBackground:{default:"#a5d6a7"}}}},r={name:"vScrollbar",computed:{computedTop(){return 100*this.state.top},computedHeight(){return 100*this.state.height}},render:function(t){var e=this,o={position:"absolute",top:0,height:e.computedHeight+"%",width:e.ops.width,background:e.ops.background,borderRadius:"4px",transform:"translateY("+e.computedTop+"%)",transition:"opacity .5s",cursor:"pointer",opacity:e.state.opacity,userSelect:"none"};return"right"==e.ops.pos?o.right=0:o.left=0,t("div",{style:o,class:"vScrollbar"})},props:{ops:{default:{background:"hsla(220,4%,58%,.3)",opacity:0,pos:"left",width:"5px"}},state:{default:{top:{default:0},height:{default:0},opacity:{default:0}}}}},s={name:"hRail",render:function(t){var e=this,o={position:"absolute",left:0,width:"100%",height:e.ops.height,background:e.ops.railBackground,opacity:"0.5",borderRadius:"4px"};return"top"==e.ops.pos?o.top=0:o.bottom=0,t("div",{style:o,on:{click:function(t){e.$emit("scrollContentByBar",t,"hScrollbar")}}},this.$slots.default)},props:{ops:{height:{default:"5px"},pos:{default:"bottom"},railBackground:{default:"#a5d6a7"}}}},a={name:"hScrollbar",computed:{computedLeft(){return 100*this.state.left},computedWidth(){return 100*this.state.width}},render:function(t){var e=this,o={position:"absolute",width:e.computedWidth+"%",height:e.ops.height,background:e.ops.background,borderRadius:"4px",transform:"translateX("+e.computedLeft+"%)",transition:"opacity .5s",cursor:"pointer",opacity:e.state.opacity,userSelect:"none"};return"top"==e.ops.pos?o.top=0:o.bottom=0,t("div",{style:o,class:"hScrollbar"})},props:{ops:{default:{background:"hsla(220,4%,58%,.3)",opacity:0,pos:"bottom",height:"5px"}},state:{default:{left:{default:0},width:{default:0},opacity:{default:0}}}}},i={name:"vueScroll",data:()=>({scrollPanel:{el:"",ops:{paddingLeft:"5px",paddingBottom:"5px",boxSizing:"border-box"}},vRail:{ops:{width:"5px",pos:"left",railBackground:"#a5d6a7"}},vScrollbar:{el:"",ops:{width:"5px",background:"#4caf50",deltaY:30,keepShow:!1,opacity:1,pos:"left"},state:{top:0,height:0,opacity:0}},hRail:{ops:{height:"5px",pos:"bottom",railBackground:"#a5d6a7"}},hScrollbar:{el:"",ops:{height:"5px",background:"#4caf50",keepShow:!1,opacity:1},state:{left:0,width:0,opacity:0,pos:"bottom"}},listeners:[],mousedown:!1,isMouseLeavePanel:!0}),render:function(t){var e=this;return t("div",{class:"vueScroll",style:{position:"relative",height:"100%",width:"100%"},on:{wheel:e.wheel,mouseenter:function(){e.isMouseLeavePanel=!1,e.showBar()},mouseleave:function(){e.isMouseLeavePanel=!0,e.hideBar()},mousemove:function(){e.isMouseLeavePanel=!1,e.showBar()}}},[t("vueScrollPanel",{ref:"vueScrollPanel",props:{scrollContentStyle:e.scrollContentStyle}},e.$slots.default),t("vRail",{props:{ops:e.vRail.ops},on:{scrollContentByBar:e.scrollContentByBar}}),t("vScrollbar",{props:{ops:e.vScrollbar.ops,state:e.vScrollbar.state},ref:"vScrollbar"}),t("hRail",{props:{ops:e.hRail.ops},on:{scrollContentByBar:e.scrollContentByBar}}),t("hScrollbar",{props:{ops:e.hScrollbar.ops,state:e.hScrollbar.state},ref:"hScrollbar"})])},mounted(){this.initEl(),this.mergeAll(),this.initBarDrag(),this.listenPanelTouch(),this.showBar()},methods:{initEl(){this.scrollPanel.el=this.$refs.vueScrollPanel&&this.$refs.vueScrollPanel.$el,this.vScrollbar.el=this.$refs.vScrollbar&&this.$refs.vScrollbar.$el,this.hScrollbar.el=this.$refs.hScrollbar&&this.$refs.hScrollbar.$el},mergeAll(){this.merge(this.ops.vBar,this.vScrollbar.ops),this.merge(this.ops.hBar,this.hScrollbar.ops),this.merge(this.ops.vBar,this.vRail.ops),this.merge(this.ops.hBar,this.hRail.ops),this.merge(this.scrollContentStyle,this.scrollPanel.ops);var t=[],e=[];"left"==this.vRail.ops.pos?t.push("paddingLeft"):t.push("paddingRight"),e.push(this.vRail.ops.width),this.scrollContentStyle[t[0]]=e[0]},merge(t,e,o){for(key in t)!1===o?this.$set(e,key,t[key]):Object.hasOwnProperty.call(e,key)&&this.$set(e,key,t[key])},initBarDrag(){var t=this.listenBarDrag("vScrollbar"),e=this.listenBarDrag("hScrollbar");t(),e()},getBarPropertyValue(t,e,o){var l=e/o;return(o<=e||Math.abs(e-o)<=this.accuracy)&&(l=0),l},adjustBarPos:(t,e,o,l)=>parseFloat(o/e),showBar(){this.showVBar(),this.showHBar()},hideBar(){this.hideVBar(),this.hideHBar()},showVBar(){if(!this.isMouseLeavePanel||this.vScrollbar.ops.keepShow||this.mousedown){var t=Math.floor(e(this.scrollPanel.el,"height").replace("px","")),o=Math.floor(this.scrollPanel.el.scrollHeight),l=Math.floor(this.scrollPanel.el.scrollTop);(this.vScrollbar.state.height=this.getBarPropertyValue("vScrollbar",t,o))&&(this.vScrollbar.state.top=this.adjustBarPos(this.vScrollbar.state.height,t-0,l,o),this.vScrollbar.state.opacity=this.vScrollbar.ops.opacity)}},showHBar(){if(!this.isMouseLeavePanel||this.vScrollbar.ops.keepShow||this.mousedown){var t=Math.floor(e(this.scrollPanel.el,"width").replace("px","")),o=Math.floor(this.scrollPanel.el.scrollWidth),l=Math.floor(this.scrollPanel.el.scrollLeft);(this.hScrollbar.state.width=this.getBarPropertyValue("hScrollbar",t,o))&&(this.hScrollbar.state.left=this.adjustBarPos(this.vScrollbar.state.width,t-0,l,o),this.hScrollbar.state.opacity=this.hScrollbar.ops.opacity)}},hideVBar(){this.vScrollbar.ops.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.vScrollbar.state.opacity=0)},hideHBar(){this.hScrollbar.ops.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.hScrollbar.state.opacity=0)},wheel(t){var e=t.deltaY>0?1:-1;0!==Math.abs(t.deltaY)&&(this.scrollBar(e*this.vScrollbar.ops.deltaY,"vScrollbar"),t.stopPropagation())},scrollBar:function(t,o){var l="vScrollbar"==o?"top":"left",r="vScrollbar"==o?"Top":"Left",s="vScrollbar"==o?"height":"width",a="vScrollbar"==o?"Height":"Width",i="vScrollbar"==o?"vscroll":"hscroll",n="vScrollbar"==o?"showVBar":"showHBar",h=(this[o].state[l],e(this.scrollPanel.el,s).replace("px","")),c=this.scrollPanel.el["scroll"+a],p=this.scrollPanel.el["scroll"+r],u=(this[o].state[s],Math.round(p+t));t<0?this.scrollPanel.el["scroll"+r]=Math.max(0,u):t>0&&(this.scrollPanel.el["scroll"+r]=Math.min(c-h,u)),this[n]();var d,v={},f={};v.residual=c-u-h,v.scrolled=u,f.scrolled=this[o].state[l],f.residual=v.residual/c*h,f[s]=this[o].state[s]*h,d=u/(c-h),f.name=o,v.name="content",this.$emit(i,f,v,d)},scrollContent(t,o){var l="vScrollbar"==o?"height":"width",r="vScrollbar"==o?"Height":"Width",s=e(this.scrollPanel.el,l).replace("px",""),a=this.scrollPanel.el["scroll"+r]*(t/s);this.scrollBar(a,o)},scrollContentByBar(t,e){var o="vScrollbar"===e?"y":"x",l=this[e].el.getBoundingClientRect(),r=t[o]-l[o]-l.height/2;this.scrollContent(r,e)},listenBarDrag:function(t){var e=this,o="vScrollbar"===t?"pageY":"pageX",l="vScrollbar"===t?"VBar":"HBar";return function(){var r,s;function a(a){var i=(s=a[o])-r;e["show"+l](),e.scrollContent(i,t),r=s}function i(t){t.stopPropagation(),e.mousedown=!0,r=t[o],e["show"+l](),document.addEventListener("mousemove",a),document.addEventListener("mouseup",function(t){e.mousedown=!1,e["hide"+l](),document.removeEventListener("mousemove",a)})}e.listeners.push({dom:e[t].el,event:i,type:"mousedown"}),e[t].el.addEventListener("mousedown",i)}},listenPanelTouch:function(){var t,e,o,l,r=this,s=this.scrollPanel.el;function a(s){if(s.touches.length){var a=s.touches[0];o=a.pageX,l=a.pageY;var i=void 0,n=o-t,h=l-e;Math.abs(n)>Math.abs(h)?(i=-n,r.scrollBar(i,"hScrollbar")):Math.abs(n)<Math.abs(h)&&(i=-h,r.scrollBar(i,"vScrollbar")),t=o,e=l}}function i(o){if(o.touches.length){o.stopPropagation();var l=o.touches[0];r.mousedown=!0,t=l.pageX,e=l.pageY,r.showBar(),s.addEventListener("touchmove",a),s.addEventListener("touchend",function(t){r.mousedown=!1,r.hideBar(),s.removeEventListener("touchmove",a)})}}s.addEventListener("touchstart",i),r.listeners.push({dom:s,event:i,type:"touchstart"})}},beforeDestroy:function(){this.listeners.forEach(function(t){t.dom.removeEventListener(t.type,t.event)})},props:{ops:{default:function(){return{vBar:{},hBar:{}}}},scrollContentStyle:{default:function(){return{width:"100%",height:"100%"}}},accuracy:{default:5}}};return t});